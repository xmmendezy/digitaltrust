import{o as g,c as $,h as s,k as C,b as a,a5 as ne,a6 as se,S as ie,d as de,R as re,r as b,a as o,w as n,j as x,t as T,x as ue,y as ce,l as U,i as M}from"./vendor.589a500a.js";import{u as me,C as pe}from"./index.da5060a4.js";const _e={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},fe=s("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1),ve=[fe];function he(u,r){return g(),$("svg",_e,ve)}var we={name:"fa-solid-user",render:he};const ge={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Ve=s("path",{d:"M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44c-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z",fill:"currentColor"},null,-1),be=[Ve];function xe(u,r){return g(),$("svg",ge,be)}var ye={name:"fa-solid-envelope-open-text",render:xe};const Ce={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},Ue=s("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1),ke=[Ue];function Ne(u,r){return g(),$("svg",Ce,ke)}var Ae={name:"fa-solid-times",render:Ne};const Te={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Ee=s("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",fill:"currentColor"},null,-1),$e=[Ee];function De(u,r){return g(),$("svg",Te,$e)}var Fe={name:"fa-solid-check",render:De};function G(u){return ne()?(se(u),!0):!1}const E=typeof window!="undefined",Me=u=>typeof u=="string",P=()=>{};function Le(u,r,d={}){const{immediate:y=!0}=d,m=C(!1);let _=null;function V(){_&&(clearTimeout(_),_=null)}function v(){m.value=!1,V()}function f(...t){V(),m.value=!0,_=setTimeout(()=>{m.value=!1,_=null,u(...t)},a(r))}return y&&(m.value=!0,E&&f()),G(v),{isPending:m,start:f,stop:v}}const Se=E?window:void 0;E&&window.document;const Pe=E?window.navigator:void 0;E&&window.location;function ze(...u){let r,d,y,m;if(Me(u[0])?([d,y,m]=u,r=Se):[r,d,y,m]=u,!r)return P;let _=P;const V=ie(()=>a(r),f=>{_(),!!f&&(f.addEventListener(d,y,m),_=()=>{f.removeEventListener(d,y,m),_=P})},{immediate:!0,flush:"post"}),v=()=>{V(),_()};return G(v),v}function Re(u={}){const{navigator:r=Pe,read:d=!1,source:y,copiedDuring:m=1500}=u,_=["copy","cut"],V=Boolean(r&&"clipboard"in r),v=C(""),f=C(!1),t=Le(()=>f.value=!1,m);function D(){r.clipboard.readText().then(h=>{v.value=h})}if(V&&d)for(const h of _)ze(h,D);async function N(h=a(y)){V&&h!=null&&(await r.clipboard.writeText(h),v.value=h,f.value=!0,t.start())}return{isSupported:V,text:v,copied:f,copy:N}}var W;(function(u){u.UP="UP",u.RIGHT="RIGHT",u.DOWN="DOWN",u.LEFT="LEFT",u.NONE="NONE"})(W||(W={}));var Y,q;E&&(window==null?void 0:window.navigator)&&((Y=window==null?void 0:window.navigator)==null?void 0:Y.platform)&&/iP(ad|hone|od)/.test((q=window==null?void 0:window.navigator)==null?void 0:q.platform);var J={};const Be={class:"admin-index has-text-centered"},Oe={class:"has-text-right mb-3"},He=x("Agregar cliente"),je=x("Copiar lista de correos"),Ie={class:"has-text-right mb-3"},Ge=x("Guardar"),We=s("p",{class:"has-text-danger mt-2"}," Los valores y tiempo actualizados ser\xE1n validos para cada estudiante una vez que acaben su per\xEDodo actual ",-1),Ye={class:"modal-card"},qe=s("header",{class:"modal-card-head"},[s("p",{class:"modal-card-title"},"Editar cliente")],-1),Je={class:"modal-card-body"},Ke={class:"columns-content"},Qe={class:"column-content"},Xe=s("p",null,"Datos del Perfil",-1),Ze={class:"form mb-4"},eo=s("p",null,"Datos del curso",-1),oo={class:"form"},lo={class:"column-content"},to=s("p",null,"Datos del Usuario",-1),ao={class:"form mb-4"},no=s("p",null,"Servicios extra",-1),so={class:"form"},io={class:"modal-card-foot"},ro=x("Guardar"),uo={class:"modal-card"},co=s("header",{class:"modal-card-head"},[s("p",{class:"modal-card-title"},"Nuevo cliente")],-1),mo={class:"modal-card-body"},po={class:"columns-content"},_o={class:"column-content"},fo=s("p",null,"Datos del Perfil",-1),vo={class:"form mb-4"},ho=s("p",null,"Datos del curso",-1),wo={class:"form"},go={class:"column-content"},Vo=s("p",null,"Datos del Usuario",-1),bo={class:"form"},xo={class:"modal-card-foot"},yo=x("Agregar cliente"),Co=de({emits:["loading"],setup(u,{emit:r}){const d=me(),{copy:y}=Re(),m=C([]),_=C([]),V=C(""),v=C(!1),f=C(!1),t=re(new pe),D=d.countries.map(i=>({value:i.id,label:i.name})),N=C([]),h=C([]),z=i=>"$"+i.price+"/90 d\xEDas";d.courses().then(i=>{h.value=i,N.value=i.map(l=>({value:l.id,label:l.name+" - "+z(l)}))}),r("loading"),d.clients().then(i=>{m.value=i}).finally(()=>{r("loading")}),d.subscribe_mails().then(i=>{_.value=i,V.value=i.map(l=>l.email).join(", ")});const R=i=>ue(ce(i),"dd/MM/yyyy HH:mm"),B=(i,l)=>{y(i.toString()),d.notification(l||`Se ha copiado al portapapeles: ${i}`,"link")},K=()=>{v.value=!0,t.empty()},Q=async i=>{r("loading"),await d.getClient(i).then(l=>{t.set(l),f.value=!0}).finally(()=>{r("loading")})},X=async()=>{r("loading"),await d.addClient(t).then(i=>{r("loading"),i?d.notification("Error al agregar cliente","warning"):(v.value=!1,d.notification("Cliente agregado","success"),t.empty(),d.clients().then(l=>{m.value=l}))}).catch(()=>{d.notification("Error al agregar cliente","warning"),r("loading")})},Z=async()=>{r("loading"),await d.updateClient(t).then(i=>{r("loading"),i?d.notification("Error al editar cliente","warning"):(f.value=!1,d.notification("Cliente editado","success"),t.empty(),d.clients().then(l=>{m.value=l}))}).catch(()=>{d.notification("Error al editar cliente","warning"),r("loading")})},ee=async()=>{r("loading");for(const i of h.value){if(!parseFloat(i.price)){d.notification("Ingrese valores de precio validos","warning");return}if(!parseInt(i.months)){d.notification("Ingrese n\xFAmero de meses validos","warning");return}}await d.updateCourses(h.value).then(i=>{h.value=i,N.value=i.map(l=>({value:l.id,label:l.name+" - "+z(l)})),d.notification("Cursos actualizados","success")}).finally(()=>{r("loading")})};return(i,l)=>{const A=b("o-button"),w=b("o-table-column"),O=Fe,H=Ae,oe=ye,le=b("router-link"),te=we,L=b("o-table"),S=b("o-tab-item"),p=b("o-input"),ae=b("o-tabs"),c=b("o-field"),F=b("Multiselect"),j=b("o-switch"),I=b("o-modal");return g(),$("div",Be,[o(ae,null,{default:n(()=>[o(S,{value:"0",label:"Usuarios registrados"},{default:n(()=>[s("div",Oe,[o(A,{"icon-right":"plus",onClick:K},{default:n(()=>[He]),_:1})]),o(L,{data:m.value},{default:n(()=>[o(w,{field:"name",label:"Nombre",width:"300"},{default:n(e=>[x(T(e.row.name),1)]),_:1}),o(w,{field:"email",label:"Correo",width:"300"},{default:n(e=>[x(T(e.row.email),1)]),_:1}),o(w,{field:"course",label:"Curso",width:"300"},{default:n(e=>[x(T(e.row.course),1)]),_:1}),o(w,{field:"created",label:"Registro",width:"300"},{default:n(e=>[x(T(R(e.row.created)),1)]),_:1}),o(w,{field:"created",label:"Pr\xF3ximo pago",width:"300"},{default:n(e=>[x(T(e.row.next_payment?R(e.row.next_payment):"---"),1)]),_:1}),o(w,{field:"payed",label:"Pagado",width:"300",position:"centered"},{default:n(e=>[e.row.payed?(g(),U(O,{key:0,class:"has-text-success"})):(g(),U(H,{key:1}))]),_:1}),o(w,{field:"message",label:"Mensajes",width:"300",position:"centered"},{default:n(e=>[o(le,{to:"/admin/message/"+e.row.id},{default:n(()=>[o(oe)]),_:2},1032,["to"])]),_:1}),o(w,{field:"profile",label:"Ver",width:"300",position:"centered"},{default:n(e=>[o(te,{onClick:k=>Q(e.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(S,{value:"1",label:"Subscritos a la lista de mails"},{default:n(()=>[o(A,{"icon-right":"copy",onClick:l[0]||(l[0]=e=>B(V.value,"Se ha copiado  la lista de correos al portapapeles"))},{default:n(()=>[je]),_:1}),o(L,{data:_.value},{default:n(()=>[o(w,{field:"email",label:"Correo"},{default:n(e=>[x(T(e.row.email),1)]),_:1}),o(w,{field:"copy",label:"Copiar",width:"30"},{default:n(e=>[o(A,{"icon-right":"copy",onClick:k=>B(e.row.email)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(S,{value:"2",label:"Cursos"},{default:n(()=>[s("div",Ie,[o(A,{"icon-right":"save",onClick:ee},{default:n(()=>[Ge]),_:1}),We]),o(L,{data:h.value},{default:n(()=>[o(w,{field:"name",label:"Curso"},{default:n(e=>[o(p,{modelValue:e.row.name,"onUpdate:modelValue":k=>e.row.name=k},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(w,{field:"name",label:"Precio",width:"300",position:"centered"},{default:n(e=>[o(p,{modelValue:e.row.price,"onUpdate:modelValue":k=>e.row.price=k},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(w,{field:"name",label:"Meses de clase",width:"150",position:"centered"},{default:n(e=>[o(p,{modelValue:e.row.months,"onUpdate:modelValue":k=>e.row.months=k},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),o(I,{active:f.value,"onUpdate:active":l[11]||(l[11]=e=>f.value=e),scroll:"clip"},{default:n(()=>[s("div",Ye,[qe,s("section",Je,[s("div",Ke,[s("div",Qe,[Xe,s("form",Ze,[o(c,{label:"Nombre"},{default:n(()=>[o(p,{modelValue:a(t).firstname,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:n(()=>[o(p,{modelValue:a(t).lastname,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:n(()=>[o(F,{modelValue:a(t).country,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).country=e),options:a(D),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),eo,s("form",oo,[o(c,{label:"Curso"},{default:n(()=>[o(F,{modelValue:a(t).course,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).course=e),options:N.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),a(t).course?(g(),U(c,{key:0,label:"Precio personalizado"},{default:n(()=>[o(p,{modelValue:a(t).course_price,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1})):M("",!0),a(t).course?(g(),U(c,{key:1,label:"Curso pagado"},{default:n(()=>[o(j,{modelValue:a(t).payed,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).payed=e)},null,8,["modelValue"])]),_:1})):M("",!0)])]),s("div",lo,[to,s("form",ao,[o(c,{label:"Nombre de usuario"},{default:n(()=>[o(p,{modelValue:a(t).username,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:n(()=>[o(p,{modelValue:a(t).email,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password_confirm,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})]),no,s("form",so,[o(c,{label:"DigitalTrust"},{default:n(()=>[a(t).digital_trust?(g(),U(O,{key:0,class:"has-text-success"})):(g(),U(H,{key:1}))]),_:1})])])])]),s("footer",io,[o(A,{"icon-right":"save",onClick:Z},{default:n(()=>[ro]),_:1})])])]),_:1},8,["active"]),o(I,{active:v.value,"onUpdate:active":l[22]||(l[22]=e=>v.value=e),scroll:"clip"},{default:n(()=>[s("div",uo,[co,s("section",mo,[s("div",po,[s("div",_o,[fo,s("form",vo,[o(c,{label:"Nombre"},{default:n(()=>[o(p,{modelValue:a(t).firstname,"onUpdate:modelValue":l[12]||(l[12]=e=>a(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:n(()=>[o(p,{modelValue:a(t).lastname,"onUpdate:modelValue":l[13]||(l[13]=e=>a(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:n(()=>[o(F,{modelValue:a(t).country,"onUpdate:modelValue":l[14]||(l[14]=e=>a(t).country=e),options:a(D),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),ho,s("form",wo,[o(c,{label:"Curso"},{default:n(()=>[o(F,{modelValue:a(t).course,"onUpdate:modelValue":l[15]||(l[15]=e=>a(t).course=e),options:N.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),a(t).course?(g(),U(c,{key:0,label:"Precio personalizado"},{default:n(()=>[o(p,{modelValue:a(t).course_price,"onUpdate:modelValue":l[16]||(l[16]=e=>a(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1})):M("",!0),a(t).course?(g(),U(c,{key:1,label:"Curso pagado"},{default:n(()=>[o(j,{modelValue:a(t).payed,"onUpdate:modelValue":l[17]||(l[17]=e=>a(t).payed=e)},null,8,["modelValue"])]),_:1})):M("",!0)])]),s("div",go,[Vo,s("form",bo,[o(c,{label:"Nombre de usuario"},{default:n(()=>[o(p,{modelValue:a(t).username,"onUpdate:modelValue":l[18]||(l[18]=e=>a(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:n(()=>[o(p,{modelValue:a(t).email,"onUpdate:modelValue":l[19]||(l[19]=e=>a(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password,"onUpdate:modelValue":l[20]||(l[20]=e=>a(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password_confirm,"onUpdate:modelValue":l[21]||(l[21]=e=>a(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})])])])]),s("footer",xo,[o(A,{"icon-right":"save",onClick:X},{default:n(()=>[yo]),_:1})])])]),_:1},8,["active"])])}}});typeof J=="function"&&J(Co);export{Co as default};
