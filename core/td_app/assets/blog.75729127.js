import{o as r,c as _,h as e,d as j,k as p,J as L,r as u,a as l,F as Q,x as R,t as D,q,s as z,w as i,u as v,i as B,j as h}from"./vendor.0c19fb08.js";import{u as G,B as J}from"./index.a4331912.js";const O={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},Y=e("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1),I=[Y];function K(V,n){return r(),_("svg",O,I)}var P={name:"fa-solid-plus",render:K},E={};const W={class:"admin-blog"},X={class:"columns-content"},Z={class:"column-content"},ee={class:"card-content media"},oe={class:"media-content"},te={class:"content"},se={class:"level is-mobile"},le=e("div",{class:"level-left"},[e("strong",null,"Nuevo art\xEDculo")],-1),ne={class:"level-right"},ae=["onClick"],ie={class:"card-content media"},ce={class:"media-content"},de={class:"content"},re={class:"has-text-left"},_e={class:"level is-mobile"},ue={class:"level-left"},ve={class:"column-content main"},he={class:"blog-main"},me={class:"level is-mobile"},pe={class:"level-left"},fe={class:"level-right"},ge={class:"level is-mobile"},xe={class:"level-item"},ke=h("Guardar"),be={key:0,class:"level-item"},Ce=h("Duplicar"),ye={key:1,class:"level-item"},De=h("Eliminar"),Be={class:"level-item"},Ee=h("Cancelar"),Ve={class:"modal-card alert"},Me=e("header",{class:"modal-card-head"},[e("p",{class:"modal-card-title"},"Eliminar art\xEDculo")],-1),we=e("section",{class:"modal-card-body"},[e("p",null,"Esta acci\xF3n no se puede revertir.")],-1),Te={class:"modal-card-foot"},Ne=h("Eliminar"),Fe=h("Cancelar"),Se=j({emits:["loading"],setup(V,{emit:n}){const c=G(),m=p(!1),x=p([]);c.courses().then(s=>{x.value=s.filter(t=>t.blog).map(t=>({value:t.id,label:t.name}))});const b=p(null),C=p(null),o=L(new J(b,C)),f=p([]);n("loading"),c.blogs().then(s=>{f.value=s,n("loading")});const M=s=>q(z(s),"dd/MM/yyyy"),w=s=>{n("loading"),o.id=s.id,o.title=s.title,o.courses=s.courses;const t=()=>{o.editor_description&&o.editor_content&&s!==void 0?(o.setDescriptionHTML(s.description),o.setContentHTML(s.content),n("loading")):setTimeout(t,100)};t()},k=()=>{n("loading"),o.clean(),n("loading")},T=()=>{n("loading"),o.id="",o.title=o.title+" - Duplicado",n("loading")},N=()=>{m.value=!0},F=()=>{n("loading"),c.delete_blog(o.id).then(s=>{s||(c.notification("Se ha eliminado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t,k()}))}).finally(()=>{m.value=!1,n("loading")})},S=()=>{o.all_courses=x.value.map(s=>s.value),n("loading"),c.blog(o).then(s=>{s||(c.notification("Se ha guardado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t}))}).finally(()=>{n("loading")})};return(s,t)=>{const $=P,A=u("o-input"),g=u("o-field"),d=u("o-button"),H=u("Multiselect"),y=u("QuillEditor"),U=u("o-modal");return r(),_("div",W,[e("div",X,[e("div",Z,[e("article",{class:"card",onClick:k},[e("div",ee,[e("div",oe,[e("div",te,[e("nav",se,[le,e("div",ne,[l($)])])])])])]),(r(!0),_(Q,null,R(f.value,a=>(r(),_("article",{class:"card",key:a.id,onClick:$e=>w(a)},[e("div",ie,[e("div",ce,[e("div",de,[e("p",re,[e("strong",null,D(a.title),1)]),e("nav",_e,[e("div",ue,D(M(a.created)),1)])])])])],8,ae))),128))]),e("div",ve,[e("article",he,[e("nav",me,[e("div",pe,[l(g,{label:"T\xEDtulo"},{default:i(()=>[l(A,{modelValue:v(o).title,"onUpdate:modelValue":t[0]||(t[0]=a=>v(o).title=a),maxlength:"70"},null,8,["modelValue"])]),_:1})]),e("div",fe,[e("nav",ge,[e("div",xe,[l(d,{variant:"primary",onClick:S},{default:i(()=>[ke]),_:1})]),v(o).id?(r(),_("div",be,[l(d,{onClick:T},{default:i(()=>[Ce]),_:1})])):B("",!0),v(o).id?(r(),_("div",ye,[l(d,{variant:"danger",onClick:N},{default:i(()=>[De]),_:1})])):B("",!0),e("div",Be,[l(d,{onClick:k},{default:i(()=>[Ee]),_:1})])])])]),l(g,{label:"Curso"},{default:i(()=>[l(H,{modelValue:v(o).courses,"onUpdate:modelValue":t[1]||(t[1]=a=>v(o).courses=a),options:x.value,mode:"tags",placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),l(g,{label:"Descripci\xF3n",class:"editor description"},{default:i(()=>[l(y,{ref_key:"editor_description",ref:b,theme:"snow",toolbar:"full"},null,512)]),_:1}),l(g,{label:"Contenido",class:"editor content"},{default:i(()=>[l(y,{ref_key:"editor_content",ref:C,theme:"snow",toolbar:"full"},null,512)]),_:1})])])]),l(U,{active:m.value,"onUpdate:active":t[3]||(t[3]=a=>m.value=a),scroll:"clip"},{default:i(()=>[e("div",Ve,[Me,we,e("footer",Te,[l(d,{variant:"primary",onClick:F},{default:i(()=>[Ne]),_:1}),l(d,{onClick:t[2]||(t[2]=a=>m.value=!1)},{default:i(()=>[Fe]),_:1})])])]),_:1},8,["active"])])}}});typeof E=="function"&&E(Se);export{Se as default};
