import{u as M}from"./index.eb6a6ac9.js";import{d as S,a4 as T,k as u,N as f,r as g,o as i,c,h as e,F as V,y as w,t as h,s as B,x as L,a as d,i as $,w as p,j as k}from"./vendor.92770e02.js";var y={};const H={class:"admin-notice"},U={class:"columns-content"},q={class:"column-content"},A={class:"card-content media"},z={class:"media-content"},G={class:"content"},I={class:"level is-mobile"},J={class:"level-left"},K={class:"level-right"},O={class:"level is-mobile"},P={class:"level-item"},Q={class:"level-item"},R={class:"level-item"},W=e("p",null,[e("strong",null,"Descripci\xF3n")],-1),X=["innerHTML"],Y={key:0},Z=["href"],ee={key:1,class:"title has-text-centered mt-6"},te={class:"modal-card alert"},se=e("header",{class:"modal-card-head"},[e("p",{class:"modal-card-title"},"Eliminar comunicado")],-1),oe=e("section",{class:"modal-card-body"},[e("p",null,"Esta acci\xF3n no se puede revertir.")],-1),ne={class:"modal-card-foot"},ae=k("Eliminar"),le=k("Cancelar"),ie=S({emits:["loading"],setup(ce,{emit:r}){const n=M(),C=T("reload_notice",{value:0}),a=u(!1),v=u(""),m=u([]);n.courses().then(t=>{m.value=t});const l=u([]);r("loading"),n.notices().then(t=>{l.value=t,r("loading")}),f(C,()=>{n.notices().then(t=>{l.value=t})}),f(a,()=>{a.value||(v.value="")});const x=t=>B(L(t),"dd/MM/yyyy"),N=t=>m.value.length?m.value.filter(o=>t.includes(o.id)).map(o=>o.name).join(", "):"---",b=t=>{v.value=t,a.value=!0},D=()=>{r("loading"),n.delete_notice(v.value).then(t=>{t||(n.notification("Se ha eliminado el comunicado","link"),n.notices().then(o=>{l.value=o}))}).finally(()=>{a.value=!1,r("loading")})},j=t=>{n.notice_edit=t};return(t,o)=>{const _=g("o-button"),E=g("o-modal");return i(),c("div",H,[e("div",U,[e("div",q,[l.value.length?(i(!0),c(V,{key:0},w(l.value,s=>(i(),c("article",{class:"card",key:s.id},[e("div",A,[e("div",z,[e("div",G,[e("nav",I,[e("div",J,[e("strong",null,h(s.title),1)]),e("div",K,[e("nav",O,[e("div",P,h(x(s.created)),1),e("div",Q,[d(_,{variant:"primary","icon-right":"pencil-alt",onClick:F=>j(s)},null,8,["onClick"])]),e("div",R,[d(_,{variant:"danger","icon-right":"times",onClick:F=>b(s.id)},null,8,["onClick"])])])])]),e("p",null,"Cursos: "+h(N(s.courses)),1),W,e("div",{class:"notice-description ql-editor",innerHTML:s.description},null,8,X),s.url?(i(),c("p",Y,[e("a",{href:s.url,target:"_blank"}," Enlace",8,Z)])):$("",!0)])])])]))),128)):(i(),c("p",ee,"Sin comunicados"))])]),d(E,{active:a.value,"onUpdate:active":o[1]||(o[1]=s=>a.value=s),scroll:"clip"},{default:p(()=>[e("div",te,[se,oe,e("footer",ne,[d(_,{variant:"primary",onClick:D},{default:p(()=>[ae]),_:1}),d(_,{onClick:o[0]||(o[0]=s=>a.value=!1)},{default:p(()=>[le]),_:1})])])]),_:1},8,["active"])])}}});typeof y=="function"&&y(ie);export{ie as default};
