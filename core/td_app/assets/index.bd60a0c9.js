import{o as g,c as S,h as d,k as C,u as a,a5 as de,a6 as re,R as ue,d as ce,N as me,r as b,a as o,w as n,j as x,t as N,s as pe,x as _e,l as $,i as E}from"./vendor.024dea34.js";import{u as fe,C as ve}from"./index.53d0b63a.js";const he={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},we=d("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1),ge=[we];function Ve(u,s){return g(),S("svg",he,ge)}var be={name:"fa-solid-user",render:Ve};const xe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},ye=d("path",{d:"M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44c-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z",fill:"currentColor"},null,-1),Ce=[ye];function Ue(u,s){return g(),S("svg",xe,Ce)}var $e={name:"fa-solid-envelope-open-text",render:Ue};const ke={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},Ae=d("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1),Ne=[Ae];function De(u,s){return g(),S("svg",ke,Ne)}var Se={name:"fa-solid-times",render:De};const Pe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Te=d("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",fill:"currentColor"},null,-1),Ee=[Te];function Me(u,s){return g(),S("svg",Pe,Ee)}var Fe={name:"fa-solid-check",render:Me};function W(u){return de()?(re(u),!0):!1}const D=typeof window!="undefined",Le=u=>typeof u=="string",z=()=>{};function ze(u,s,i={}){const{immediate:y=!0}=i,m=C(!1);let _=null;function V(){_&&(clearTimeout(_),_=null)}function v(){m.value=!1,V()}function f(...t){V(),m.value=!0,_=setTimeout(()=>{m.value=!1,_=null,u(...t)},a(s))}return y&&(m.value=!0,D&&f()),W(v),{isPending:m,start:f,stop:v}}const Oe=D?window:void 0;D&&window.document;const Re=D?window.navigator:void 0;D&&window.location;function Be(...u){let s,i,y,m;if(Le(u[0])?([i,y,m]=u,s=Oe):[s,i,y,m]=u,!s)return z;let _=z;const V=ue(()=>a(s),f=>{_(),!!f&&(f.addEventListener(i,y,m),_=()=>{f.removeEventListener(i,y,m),_=z})},{immediate:!0,flush:"post"}),v=()=>{V(),_()};return W(v),v}function je(u={}){const{navigator:s=Re,read:i=!1,source:y,copiedDuring:m=1500}=u,_=["copy","cut"],V=Boolean(s&&"clipboard"in s),v=C(""),f=C(!1),t=ze(()=>f.value=!1,m);function P(){s.clipboard.readText().then(w=>{v.value=w})}if(V&&i)for(const w of _)Be(w,P);async function k(w=a(y)){V&&w!=null&&(await s.clipboard.writeText(w),v.value=w,f.value=!0,t.start())}return{isSupported:V,text:v,copied:f,copy:k}}const O=typeof globalThis=="undefined"?void 0:globalThis,R="__vueuse_ssr_handlers__";O[R]=O[R]||{};O[R];var q,K;D&&(window==null?void 0:window.navigator)&&((q=window==null?void 0:window.navigator)==null?void 0:q.platform)&&/iP(ad|hone|od)/.test((K=window==null?void 0:window.navigator)==null?void 0:K.platform);var He=Object.defineProperty,J=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Q=(u,s,i)=>s in u?He(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,Ge=(u,s)=>{for(var i in s||(s={}))Ie.call(s,i)&&Q(u,i,s[i]);if(J)for(var i of J(s))Ye.call(s,i)&&Q(u,i,s[i]);return u};const We={top:0,left:0,bottom:0,right:0,height:0,width:0};Ge({text:""},We);var X={};const qe={class:"admin-index has-text-centered"},Ke={class:"has-text-right mb-3"},Je=x("Agregar cliente"),Qe=x("Copiar lista de correos"),Xe={class:"has-text-right mb-3"},Ze=x("Guardar"),eo=d("p",{class:"has-text-danger mt-2"}," Los valores y tiempos actualizados ser\xE1n validos para cada estudiante una vez que acaben su per\xEDodo actual ",-1),oo={class:"modal-card"},lo=d("header",{class:"modal-card-head"},[d("p",{class:"modal-card-title"},"Editar cliente")],-1),to={class:"modal-card-body"},ao={class:"columns-content"},no={class:"column-content"},so=d("p",null,"Datos del Perfil",-1),io={class:"form mb-4"},ro=d("p",null,"Datos del curso",-1),uo={class:"form"},co={class:"column-content"},mo=d("p",null,"Datos del Usuario",-1),po={class:"form mb-4"},_o=d("p",null,"Servicios extra",-1),fo={class:"form"},vo={class:"modal-card-foot"},ho=x("Guardar"),wo={class:"modal-card"},go=d("header",{class:"modal-card-head"},[d("p",{class:"modal-card-title"},"Nuevo cliente")],-1),Vo={class:"modal-card-body"},bo={class:"columns-content"},xo={class:"column-content"},yo=d("p",null,"Datos del Perfil",-1),Co={class:"form mb-4"},Uo=d("p",null,"Datos del curso",-1),$o={class:"form"},ko={class:"column-content"},Ao=d("p",null,"Datos del Usuario",-1),No={class:"form"},Do={class:"modal-card-foot"},So=x("Agregar cliente"),Po=ce({emits:["loading"],setup(u,{emit:s}){const i=fe(),{copy:y}=je(),m=C([]),_=C([]),V=C(""),v=C(!1),f=C(!1),t=me(new ve),P=i.countries.map(r=>({value:r.id,label:r.name})),k=C([]),w=C([]),B=r=>"$"+r.price+"/90 d\xEDas";i.courses_all().then(r=>{w.value=r,k.value=r.map(l=>({value:l.id,label:l.name+" - "+B(l)}))}),s("loading"),i.clients().then(r=>{m.value=r}).finally(()=>{s("loading")}),i.subscribe_mails().then(r=>{_.value=r,V.value=r.map(l=>l.email).join(", ")});const j=r=>pe(_e(r),"dd/MM/yyyy HH:mm"),H=(r,l)=>{y(r.toString()),i.notification(l||`Se ha copiado al portapapeles: ${r}`,"link")},Z=()=>{v.value=!0,t.empty()},ee=async r=>{s("loading"),await i.getClient(r).then(l=>{t.set(l),f.value=!0}).finally(()=>{s("loading")})},oe=async()=>{s("loading"),await i.addClient(t).then(r=>{s("loading"),r?i.notification("Error al agregar cliente","warning"):(v.value=!1,i.notification("Cliente agregado","success"),t.empty(),i.clients().then(l=>{m.value=l}))}).catch(()=>{i.notification("Error al agregar cliente","warning"),s("loading")})},le=async()=>{s("loading"),await i.updateClient(t).then(r=>{s("loading"),r?i.notification("Error al editar cliente","warning"):(f.value=!1,i.notification("Cliente editado","success"),t.empty(),i.clients().then(l=>{m.value=l}))}).catch(()=>{i.notification("Error al editar cliente","warning"),s("loading")})},te=async()=>{s("loading");for(const r of w.value){if(!parseFloat(r.price)){i.notification("Ingrese valores de precio validos","warning");return}if(!parseInt(r.months)){i.notification("Ingrese n\xFAmero de meses validos","warning");return}}await i.updateCourses(w.value).then(r=>{w.value=r,k.value=r.map(l=>({value:l.id,label:l.name+" - "+B(l)})),i.notification("Cursos actualizados","success")}).finally(()=>{s("loading")})};return(r,l)=>{const A=b("o-button"),h=b("o-table-column"),I=Fe,Y=Se,ae=$e,ne=b("router-link"),se=be,M=b("o-table"),F=b("o-tab-item"),p=b("o-input"),L=b("o-switch"),ie=b("o-tabs"),c=b("o-field"),T=b("Multiselect"),G=b("o-modal");return g(),S("div",qe,[o(ie,null,{default:n(()=>[o(F,{value:"0",label:"Usuarios registrados"},{default:n(()=>[d("div",Ke,[o(A,{"icon-right":"plus",onClick:Z},{default:n(()=>[Je]),_:1})]),o(M,{data:m.value},{default:n(()=>[o(h,{field:"name",label:"Nombre",width:"300"},{default:n(e=>[x(N(e.row.name),1)]),_:1}),o(h,{field:"email",label:"Correo",width:"300"},{default:n(e=>[x(N(e.row.email),1)]),_:1}),o(h,{field:"course",label:"Curso",width:"300"},{default:n(e=>[x(N(e.row.course),1)]),_:1}),o(h,{field:"created",label:"Registro",width:"300"},{default:n(e=>[x(N(j(e.row.created)),1)]),_:1}),o(h,{field:"created",label:"Pr\xF3ximo pago",width:"300"},{default:n(e=>[x(N(e.row.next_payment?j(e.row.next_payment):"---"),1)]),_:1}),o(h,{field:"payed",label:"Pagado",width:"300",position:"centered"},{default:n(e=>[e.row.payed?(g(),$(I,{key:0,class:"has-text-success"})):(g(),$(Y,{key:1}))]),_:1}),o(h,{field:"message",label:"Mensajes",width:"300",position:"centered"},{default:n(e=>[o(ne,{to:"/admin/message/"+e.row.id},{default:n(()=>[o(ae)]),_:2},1032,["to"])]),_:1}),o(h,{field:"profile",label:"Ver",width:"300",position:"centered"},{default:n(e=>[o(se,{onClick:U=>ee(e.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(F,{value:"1",label:"Subscritos a la lista de mails"},{default:n(()=>[o(A,{"icon-right":"copy",onClick:l[0]||(l[0]=e=>H(V.value,"Se ha copiado  la lista de correos al portapapeles"))},{default:n(()=>[Qe]),_:1}),o(M,{data:_.value},{default:n(()=>[o(h,{field:"email",label:"Correo"},{default:n(e=>[x(N(e.row.email),1)]),_:1}),o(h,{field:"copy",label:"Copiar",width:"30"},{default:n(e=>[o(A,{"icon-right":"copy",onClick:U=>H(e.row.email)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(F,{value:"2",label:"Cursos"},{default:n(()=>[d("div",Xe,[o(A,{"icon-right":"save",onClick:te},{default:n(()=>[Ze]),_:1}),eo]),o(M,{data:w.value},{default:n(()=>[o(h,{field:"name",label:"Curso"},{default:n(e=>[o(p,{modelValue:e.row.name,"onUpdate:modelValue":U=>e.row.name=U},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(h,{field:"price",label:"Precio",width:"300",position:"centered"},{default:n(e=>[o(p,{modelValue:e.row.price,"onUpdate:modelValue":U=>e.row.price=U},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(h,{field:"months",label:"Meses de clase",width:"150",position:"centered"},{default:n(e=>[o(p,{modelValue:e.row.months,"onUpdate:modelValue":U=>e.row.months=U},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(h,{field:"is_active",label:"Activo",width:"150",position:"centered"},{default:n(e=>[o(L,{modelValue:e.row.is_active,"onUpdate:modelValue":U=>e.row.is_active=U},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),o(G,{active:f.value,"onUpdate:active":l[11]||(l[11]=e=>f.value=e),scroll:"clip"},{default:n(()=>[d("div",oo,[lo,d("section",to,[d("div",ao,[d("div",no,[so,d("form",io,[o(c,{label:"Nombre"},{default:n(()=>[o(p,{modelValue:a(t).firstname,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:n(()=>[o(p,{modelValue:a(t).lastname,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:n(()=>[o(T,{modelValue:a(t).country,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).country=e),options:a(P),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),ro,d("form",uo,[o(c,{label:"Curso"},{default:n(()=>[o(T,{modelValue:a(t).course,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).course=e),options:k.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),a(t).course?(g(),$(c,{key:0,label:"Precio personalizado"},{default:n(()=>[o(p,{modelValue:a(t).course_price,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1})):E("",!0),a(t).course?(g(),$(c,{key:1,label:"Curso pagado"},{default:n(()=>[o(L,{modelValue:a(t).payed,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).payed=e)},null,8,["modelValue"])]),_:1})):E("",!0)])]),d("div",co,[mo,d("form",po,[o(c,{label:"Nombre de usuario"},{default:n(()=>[o(p,{modelValue:a(t).username,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:n(()=>[o(p,{modelValue:a(t).email,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password_confirm,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})]),_o,d("form",fo,[o(c,{label:"DigitalTrust"},{default:n(()=>[a(t).digital_trust?(g(),$(I,{key:0,class:"has-text-success"})):(g(),$(Y,{key:1}))]),_:1})])])])]),d("footer",vo,[o(A,{"icon-right":"save",onClick:le},{default:n(()=>[ho]),_:1})])])]),_:1},8,["active"]),o(G,{active:v.value,"onUpdate:active":l[22]||(l[22]=e=>v.value=e),scroll:"clip"},{default:n(()=>[d("div",wo,[go,d("section",Vo,[d("div",bo,[d("div",xo,[yo,d("form",Co,[o(c,{label:"Nombre"},{default:n(()=>[o(p,{modelValue:a(t).firstname,"onUpdate:modelValue":l[12]||(l[12]=e=>a(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:n(()=>[o(p,{modelValue:a(t).lastname,"onUpdate:modelValue":l[13]||(l[13]=e=>a(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:n(()=>[o(T,{modelValue:a(t).country,"onUpdate:modelValue":l[14]||(l[14]=e=>a(t).country=e),options:a(P),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),Uo,d("form",$o,[o(c,{label:"Curso"},{default:n(()=>[o(T,{modelValue:a(t).course,"onUpdate:modelValue":l[15]||(l[15]=e=>a(t).course=e),options:k.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),a(t).course?(g(),$(c,{key:0,label:"Precio personalizado"},{default:n(()=>[o(p,{modelValue:a(t).course_price,"onUpdate:modelValue":l[16]||(l[16]=e=>a(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1})):E("",!0),a(t).course?(g(),$(c,{key:1,label:"Curso pagado"},{default:n(()=>[o(L,{modelValue:a(t).payed,"onUpdate:modelValue":l[17]||(l[17]=e=>a(t).payed=e)},null,8,["modelValue"])]),_:1})):E("",!0)])]),d("div",ko,[Ao,d("form",No,[o(c,{label:"Nombre de usuario"},{default:n(()=>[o(p,{modelValue:a(t).username,"onUpdate:modelValue":l[18]||(l[18]=e=>a(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:n(()=>[o(p,{modelValue:a(t).email,"onUpdate:modelValue":l[19]||(l[19]=e=>a(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password,"onUpdate:modelValue":l[20]||(l[20]=e=>a(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:n(()=>[o(p,{modelValue:a(t).password_confirm,"onUpdate:modelValue":l[21]||(l[21]=e=>a(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})])])])]),d("footer",Do,[o(A,{"icon-right":"save",onClick:oe},{default:n(()=>[So]),_:1})])])]),_:1},8,["active"])])}}});typeof X=="function"&&X(Po);export{Po as default};
