import{o as r,c as _,h as e,d as L,k as p,R,r as u,a as n,F as z,z as Q,t as B,x as G,y as O,w as i,b as v,i as E,j as h}from"./vendor.589a500a.js";import{u as Y,B as q}from"./index.da5060a4.js";const I={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},J=e("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1),K=[J];function P(M,a){return r(),_("svg",I,K)}var W={name:"fa-solid-plus",render:P},V={};const X={class:"admin-blog"},Z={class:"columns-content"},ee={class:"column-content"},oe={class:"card-content media"},te={class:"media-content"},le={class:"content"},se={class:"level is-mobile"},ne=e("div",{class:"level-left"},[e("strong",null,"Nuevo art\xEDculo")],-1),ae={class:"level-right"},ie=["onClick"],ce={class:"card-content media"},de={class:"media-content"},re={class:"content"},_e={class:"has-text-left"},ue={class:"level is-mobile"},ve={class:"level-left"},he={class:"column-content main"},me={class:"blog-main"},pe={class:"level is-mobile"},fe={class:"level-left"},ge={class:"level-right"},xe={class:"level is-mobile"},be={class:"level-item"},Ce=h("Guardar"),ke={key:0,class:"level-item"},ye=h("Duplicar"),De={key:1,class:"level-item"},Be=h("Eliminar"),Ee={class:"level-item"},Ve=h("Cancelar"),Me={class:"modal-card alert"},we=e("header",{class:"modal-card-head"},[e("p",{class:"modal-card-title"},"Eliminar art\xEDculo")],-1),Te=e("section",{class:"modal-card-body"},[e("p",null,"Esta acci\xF3n no se puede revertir.")],-1),Ne={class:"modal-card-foot"},Fe=h("Eliminar"),Se=h("Cancelar"),$e=L({emits:["loading"],setup(M,{emit:a}){const c=Y(),m=p(!1),b=p([]);c.courses().then(l=>{b.value=l.filter(t=>t.blog).map(t=>({value:t.id,label:t.name}))});const k=p(null),y=p(null),o=R(new q(k,y)),f=p([]);a("loading"),c.blogs().then(l=>{f.value=l,a("loading")});const w=l=>G(O(l),"dd/MM/yyyy"),T=l=>{a("loading"),o.id=l.id,o.title=l.title,o.courses=l.courses;const t=()=>{o.editor_description&&o.editor_content&&l!==void 0?(o.setDescriptionHTML(l.description),o.setContentHTML(l.content),a("loading")):setTimeout(t,100)};t()},C=()=>{a("loading"),o.clean(),a("loading")},N=()=>{a("loading"),o.id="",o.title=o.title+" - Duplicado",a("loading")},F=()=>{m.value=!0},S=()=>{a("loading"),c.delete_blog(o.id).then(l=>{l||(c.notification("Se ha eliminado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t,C()}))}).finally(()=>{m.value=!1,a("loading")})},$=()=>{o.all_courses=b.value.map(l=>l.value),a("loading"),c.blog(o).then(l=>{l||(c.notification("Se ha guardado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t}))}).finally(()=>{a("loading")})};return(l,t)=>{const A=W,H=u("o-input"),g=u("o-field"),d=u("o-button"),U=u("Multiselect"),D=u("QuillEditor"),j=u("o-modal");return r(),_("div",X,[e("div",Z,[e("div",ee,[e("article",{class:"card",onClick:C},[e("div",oe,[e("div",te,[e("div",le,[e("nav",se,[ne,e("div",ae,[n(A)])])])])])]),(r(!0),_(z,null,Q(f.value,s=>(r(),_("article",{class:"card",key:s.id,onClick:x=>T(s)},[e("div",ce,[e("div",de,[e("div",re,[e("p",_e,[e("strong",null,B(s.title),1)]),e("nav",ue,[e("div",ve,B(w(s.created)),1)])])])])],8,ie))),128))]),e("div",he,[e("article",me,[e("nav",pe,[e("div",fe,[n(g,{label:"T\xEDtulo"},{default:i(()=>[n(H,{modelValue:v(o).title,"onUpdate:modelValue":t[0]||(t[0]=s=>v(o).title=s),maxlength:"70"},null,8,["modelValue"])]),_:1})]),e("div",ge,[e("nav",xe,[e("div",be,[n(d,{variant:"primary",onClick:$},{default:i(()=>[Ce]),_:1})]),v(o).id?(r(),_("div",ke,[n(d,{onClick:N},{default:i(()=>[ye]),_:1})])):E("",!0),v(o).id?(r(),_("div",De,[n(d,{variant:"danger",onClick:F},{default:i(()=>[Be]),_:1})])):E("",!0),e("div",Ee,[n(d,{onClick:C},{default:i(()=>[Ve]),_:1})])])])]),n(g,{label:"Curso"},{default:i(()=>[n(U,{modelValue:v(o).courses,"onUpdate:modelValue":t[1]||(t[1]=s=>v(o).courses=s),options:b.value,mode:"tags",placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),n(g,{label:"Descripci\xF3n",class:"editor description"},{default:i(()=>[n(D,{ref:(s,x)=>{x.editor_description=s,k.value=s},theme:"snow",toolbar:"full"},null,512)]),_:1}),n(g,{label:"Contenido",class:"editor content"},{default:i(()=>[n(D,{ref:(s,x)=>{x.editor_content=s,y.value=s},theme:"snow",toolbar:"full"},null,512)]),_:1})])])]),n(j,{active:m.value,"onUpdate:active":t[3]||(t[3]=s=>m.value=s),scroll:"clip"},{default:i(()=>[e("div",Me,[we,Te,e("footer",Ne,[n(d,{variant:"primary",onClick:S},{default:i(()=>[Fe]),_:1}),n(d,{onClick:t[2]||(t[2]=s=>m.value=!1)},{default:i(()=>[Se]),_:1})])])]),_:1},8,["active"])])}}});typeof V=="function"&&V($e);export{$e as default};
