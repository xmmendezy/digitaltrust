import{_ as M,u as N,N as H,a as I}from"./index.da5060a4.js";import{d as V,r,o as f,c as y,h as e,a as t,w as n,b as d,j as m,k as p,P as O,R as P,S as Q,F as R,T as G,l as D,p as q,t as $,i as z}from"./vendor.589a500a.js";const J={class:"tabs"},K={class:"is-justify-content-flex-end"},W=m("Inicio"),X={class:"is-hidden-mobile"},Y=m("Comunicados"),Z={class:"is-hidden-mobile"},ee=m("Blog"),oe=V({setup(T){const l=N();return(u,i)=>{const _=r("router-link");return f(),y("div",J,[e("ul",K,[e("li",null,[t(_,{to:"/admin"},{default:n(()=>[W]),_:1})]),e("li",X,[t(_,{to:"/admin/notice"},{default:n(()=>[Y]),_:1})]),e("li",Z,[t(_,{to:"/admin/blog"},{default:n(()=>[ee]),_:1})]),e("li",null,[e("a",{onClick:i[0]||(i[0]=h=>d(l).logout())},"Salir")])])])}}});var te=M(oe,[["__scopeId","data-v-19097a86"]]);const ae={class:"admin"},se={class:"card card-main"},le={class:"card-header"},ne=e("figure",{class:"image is-64x64 logo"},[e("img",{alt:"TradingDigital",src:I})],-1),ie=e("p",{class:"card-header-title"},"TradingDigital - Admin",-1),de={class:"card-content"},ce={style:{position:"relative"}},re=e("i",{class:"fas fa-plus"},null,-1),ue=[re],_e={class:"modal-card"},me={class:"modal-card-head"},pe={class:"modal-card-title"},ve={class:"modal-card-body"},fe={class:"modal-card-foot"},he=m("Duplicar"),ge=m("Cancelar"),ke=V({setup(T){const l=N(),u=p(!1),i=p(!1),_=p(0);O("reload_notice",_);const h=p(null),o=P(new H(h)),w=()=>{u.value=!u.value},g=p([]);l.courses().then(c=>{g.value=c.map(a=>({value:a.id,label:a.name}))});const S=()=>{i.value=!0},A=()=>{o.id="",o.title=o.title+" - Duplicado"};Q(i,()=>{i.value||(o.clean(),l.notice_edit=void 0)}),l.$subscribe(()=>{if(l.notice_edit!==void 0){i.value=!0,o.id=l.notice_edit.id,o.title=l.notice_edit.title,o.courses=l.notice_edit.courses;const c=()=>{o.editor&&l.notice_edit!==void 0?o.setHTML(l.notice_edit.description):setTimeout(c,100)};c()}});const E=()=>{o.all_courses=g.value.map(c=>c.value),u.value=!0,l.notice(o).then(c=>{c||(i.value=!1,l.notification("Se ha guardado el comunicado","link"),_.value=Math.random())}).finally(()=>{u.value=!1})};return(c,a)=>{const k=te,B=r("router-view"),F=r("o-loading"),C=r("o-input"),v=r("o-field"),U=r("Multiselect"),j=r("QuillEditor"),b=r("o-button"),L=r("o-modal");return f(),y(R,null,[e("div",ae,[e("div",se,[e("header",le,[ne,ie,t(k,{class:"is-hidden-mobile"})]),e("div",de,[t(k,{class:"is-hidden-tablet"}),e("div",ce,[t(B,null,{default:n(({Component:s,route:x})=>[t(G,{name:x.meta.transitionName},{default:n(()=>[(f(),D(q(s),{onLoading:w}))]),_:2},1032,["name"])]),_:1}),t(F,{active:u.value,"onUpdate:active":a[0]||(a[0]=s=>u.value=s)},null,8,["active"])])])])]),e("a",{class:"button is-floating is-hidden-mobile",onClick:S},ue),t(L,{active:i.value,"onUpdate:active":a[5]||(a[5]=s=>i.value=s),scroll:"clip"},{default:n(()=>[e("div",_e,[e("header",me,[e("p",pe,$(d(o).id?"Editar comunicado":"Nuevo comunicado"),1)]),e("section",ve,[t(v,{label:"T\xEDtulo"},{default:n(()=>[t(C,{modelValue:d(o).title,"onUpdate:modelValue":a[1]||(a[1]=s=>d(o).title=s),maxlength:"70"},null,8,["modelValue"])]),_:1}),t(v,{label:"Curso"},{default:n(()=>[t(U,{modelValue:d(o).courses,"onUpdate:modelValue":a[2]||(a[2]=s=>d(o).courses=s),options:g.value,mode:"tags",placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),t(v,{label:"Enlace (Opcional)"},{default:n(()=>[t(C,{modelValue:d(o).url,"onUpdate:modelValue":a[3]||(a[3]=s=>d(o).url=s),maxlength:"70"},null,8,["modelValue"])]),_:1}),t(v,{label:"Descripci\xF3n",class:"editor"},{default:n(()=>[t(j,{ref:(s,x)=>{x.editor=s,h.value=s},theme:"snow",toolbar:"full"},null,512)]),_:1})]),e("footer",fe,[t(b,{variant:"primary",onClick:E},{default:n(()=>[m($(d(o).id?"Guardar":"Publicar"),1)]),_:1}),d(o).id?(f(),D(b,{key:0,onClick:A},{default:n(()=>[he]),_:1})):z("",!0),t(b,{onClick:a[4]||(a[4]=s=>i.value=!1)},{default:n(()=>[ge]),_:1})])])]),_:1},8,["active"])],64)}}});export{ke as default};
