import{o as U,c as T,h as s,k as y,b as n,a5 as ae,a6 as ne,R as se,d as ie,P as de,r as V,a as o,w as a,j as b,t as k,s as re,x as ue,l as B}from"./vendor.0a427255.js";import{u as ce,C as me}from"./index.3f2501d9.js";const pe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},_e=s("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1),fe=[_e];function ve(u,r){return U(),T("svg",pe,fe)}var he={name:"fa-solid-user",render:ve};const we={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},ge=s("path",{d:"M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44c-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z",fill:"currentColor"},null,-1),Ve=[ge];function be(u,r){return U(),T("svg",we,Ve)}var xe={name:"fa-solid-envelope-open-text",render:be};const ye={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},Ce=s("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1),Ue=[Ce];function Ne(u,r){return U(),T("svg",ye,Ue)}var Ae={name:"fa-solid-times",render:Ne};const ke={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Ee=s("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",fill:"currentColor"},null,-1),Te=[Ee];function $e(u,r){return U(),T("svg",ke,Te)}var De={name:"fa-solid-check",render:$e};function O(u){return ae()?(ne(u),!0):!1}const E=typeof window!="undefined",Fe=u=>typeof u=="string",L=()=>{};function Me(u,r,d={}){const{immediate:x=!0}=d,m=y(!1);let _=null;function g(){_&&(clearTimeout(_),_=null)}function v(){m.value=!1,g()}function f(...t){g(),m.value=!0,_=setTimeout(()=>{m.value=!1,_=null,u(...t)},n(r))}return x&&(m.value=!0,E&&f()),O(v),{isPending:m,start:f,stop:v}}const Le=E?window:void 0;E&&window.document;const Pe=E?window.navigator:void 0;E&&window.location;function Se(...u){let r,d,x,m;if(Fe(u[0])?([d,x,m]=u,r=Le):[r,d,x,m]=u,!r)return L;let _=L;const g=se(()=>n(r),f=>{_(),!!f&&(f.addEventListener(d,x,m),_=()=>{f.removeEventListener(d,x,m),_=L})},{immediate:!0,flush:"post"}),v=()=>{g(),_()};return O(v),v}function ze(u={}){const{navigator:r=Pe,read:d=!1,source:x,copiedDuring:m=1500}=u,_=["copy","cut"],g=Boolean(r&&"clipboard"in r),v=y(""),f=y(!1),t=Me(()=>f.value=!1,m);function $(){r.clipboard.readText().then(h=>{v.value=h})}if(g&&d)for(const h of _)Se(h,$);async function N(h=n(x)){g&&h!=null&&(await r.clipboard.writeText(h),v.value=h,f.value=!0,t.start())}return{isSupported:g,text:v,copied:f,copy:N}}var H;(function(u){u.UP="UP",u.RIGHT="RIGHT",u.DOWN="DOWN",u.LEFT="LEFT",u.NONE="NONE"})(H||(H={}));var j,I;E&&(window==null?void 0:window.navigator)&&((j=window==null?void 0:window.navigator)==null?void 0:j.platform)&&/iP(ad|hone|od)/.test((I=window==null?void 0:window.navigator)==null?void 0:I.platform);var G={};const Re={class:"admin-index has-text-centered"},Be={class:"has-text-right mb-3"},Oe=b("Agregar cliente"),He=b("Copiar lista de correos"),je={class:"has-text-right mb-3"},Ie=b("Guardar"),Ge=s("p",{class:"has-text-danger mt-2"}," Los valores y tiempo actualizados ser\xE1n validos para cada estudiante una vez que acaben su per\xEDodo actual ",-1),We={class:"modal-card"},Ye=s("header",{class:"modal-card-head"},[s("p",{class:"modal-card-title"},"Editar cliente")],-1),qe={class:"modal-card-body"},Je={class:"columns-content"},Ke={class:"column-content"},Qe=s("p",null,"Datos del Perfil",-1),Xe={class:"form mb-4"},Ze=s("p",null,"Datos del curso",-1),eo={class:"form"},oo={class:"column-content"},lo=s("p",null,"Datos del Usuario",-1),to={class:"form"},ao={class:"modal-card-foot"},no=b("Guardar"),so={class:"modal-card"},io=s("header",{class:"modal-card-head"},[s("p",{class:"modal-card-title"},"Nuevo cliente")],-1),ro={class:"modal-card-body"},uo={class:"columns-content"},co={class:"column-content"},mo=s("p",null,"Datos del Perfil",-1),po={class:"form mb-4"},_o=s("p",null,"Datos del curso",-1),fo={class:"form"},vo={class:"column-content"},ho=s("p",null,"Datos del Usuario",-1),wo={class:"form"},go={class:"modal-card-foot"},Vo=b("Agregar cliente"),bo=ie({emits:["loading"],setup(u,{emit:r}){const d=ce(),{copy:x}=ze(),m=y([]),_=y([]),g=y(""),v=y(!1),f=y(!1),t=de(new me),$=d.countries.map(i=>({value:i.id,label:i.name})),N=y([]),h=y([]),P=i=>"$"+i.price+"/90 d\xEDas";d.courses().then(i=>{h.value=i,N.value=i.map(l=>({value:l.id,label:l.name+" - "+P(l)}))}),r("loading"),d.clients().then(i=>{m.value=i}).finally(()=>{r("loading")}),d.subscribe_mails().then(i=>{_.value=i,g.value=i.map(l=>l.email).join(", ")});const S=i=>re(ue(i),"dd/MM/yyyy HH:mm"),z=(i,l)=>{x(i.toString()),d.notification(l||`Se ha copiado al portapapeles: ${i}`,"link")},W=()=>{v.value=!0,t.empty()},Y=async i=>{r("loading"),await d.getClient(i).then(l=>{t.set(l),f.value=!0}).finally(()=>{r("loading")})},q=async()=>{r("loading"),await d.addClient(t).then(i=>{r("loading"),i?d.notification("Error al agregar cliente","warning"):(v.value=!1,d.notification("Cliente agregado","success"),t.empty(),d.clients().then(l=>{m.value=l}))}).catch(()=>{d.notification("Error al agregar cliente","warning"),r("loading")})},J=async()=>{r("loading"),await d.updateClient(t).then(i=>{r("loading"),i?d.notification("Error al editar cliente","warning"):(f.value=!1,d.notification("Cliente editado","success"),t.empty(),d.clients().then(l=>{m.value=l}))}).catch(()=>{d.notification("Error al editar cliente","warning"),r("loading")})},K=async()=>{r("loading");for(const i of h.value){if(!parseFloat(i.price)){d.notification("Ingrese valores de precio validos","warning");return}if(!parseInt(i.months)){d.notification("Ingrese n\xFAmero de meses validos","warning");return}}await d.updateCourses(h.value).then(i=>{h.value=i,N.value=i.map(l=>({value:l.id,label:l.name+" - "+P(l)})),d.notification("Cursos actualizados","success")}).finally(()=>{r("loading")})};return(i,l)=>{const A=V("o-button"),w=V("o-table-column"),Q=De,X=Ae,Z=xe,ee=V("router-link"),oe=he,F=V("o-table"),M=V("o-tab-item"),p=V("o-input"),le=V("o-tabs"),c=V("o-field"),D=V("Multiselect"),R=V("o-modal"),te=V("o-switch");return U(),T("div",Re,[o(le,null,{default:a(()=>[o(M,{value:"0",label:"Usuarios registrados"},{default:a(()=>[s("div",Be,[o(A,{"icon-right":"plus",onClick:W},{default:a(()=>[Oe]),_:1})]),o(F,{data:m.value},{default:a(()=>[o(w,{field:"name",label:"Nombre",width:"300"},{default:a(e=>[b(k(e.row.name),1)]),_:1}),o(w,{field:"email",label:"Correo",width:"300"},{default:a(e=>[b(k(e.row.email),1)]),_:1}),o(w,{field:"course",label:"Curso",width:"300"},{default:a(e=>[b(k(e.row.course),1)]),_:1}),o(w,{field:"created",label:"Registro",width:"300"},{default:a(e=>[b(k(S(e.row.created)),1)]),_:1}),o(w,{field:"created",label:"Pr\xF3ximo pago",width:"300"},{default:a(e=>[b(k(e.row.next_payment?S(e.row.next_payment):"---"),1)]),_:1}),o(w,{field:"payed",label:"Pagado",width:"300",position:"centered"},{default:a(e=>[e.row.payed?(U(),B(Q,{key:0,class:"has-text-success"})):(U(),B(X,{key:1}))]),_:1}),o(w,{field:"message",label:"Mensajes",width:"300",position:"centered"},{default:a(e=>[o(ee,{to:"/admin/message/"+e.row.id},{default:a(()=>[o(Z)]),_:2},1032,["to"])]),_:1}),o(w,{field:"profile",label:"Ver",width:"300",position:"centered"},{default:a(e=>[o(oe,{onClick:C=>Y(e.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(M,{value:"1",label:"Subscritos a la lista de mails"},{default:a(()=>[o(A,{"icon-right":"copy",onClick:l[0]||(l[0]=e=>z(g.value,"Se ha copiado  la lista de correos al portapapeles"))},{default:a(()=>[He]),_:1}),o(F,{data:_.value},{default:a(()=>[o(w,{field:"email",label:"Correo"},{default:a(e=>[b(k(e.row.email),1)]),_:1}),o(w,{field:"copy",label:"Copiar",width:"30"},{default:a(e=>[o(A,{"icon-right":"copy",onClick:C=>z(e.row.email)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(M,{value:"2",label:"Cursos"},{default:a(()=>[s("div",je,[o(A,{"icon-right":"save",onClick:K},{default:a(()=>[Ie]),_:1}),Ge]),o(F,{data:h.value},{default:a(()=>[o(w,{field:"name",label:"Curso"},{default:a(e=>[o(p,{modelValue:e.row.name,"onUpdate:modelValue":C=>e.row.name=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(w,{field:"name",label:"Precio",width:"300",position:"centered"},{default:a(e=>[o(p,{modelValue:e.row.price,"onUpdate:modelValue":C=>e.row.price=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(w,{field:"name",label:"Meses de clase",width:"150",position:"centered"},{default:a(e=>[o(p,{modelValue:e.row.months,"onUpdate:modelValue":C=>e.row.months=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),o(R,{active:f.value,"onUpdate:active":l[10]||(l[10]=e=>f.value=e),scroll:"clip"},{default:a(()=>[s("div",We,[Ye,s("section",qe,[s("div",Je,[s("div",Ke,[Qe,s("form",Xe,[o(c,{label:"Nombre"},{default:a(()=>[o(p,{modelValue:n(t).firstname,"onUpdate:modelValue":l[1]||(l[1]=e=>n(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:a(()=>[o(p,{modelValue:n(t).lastname,"onUpdate:modelValue":l[2]||(l[2]=e=>n(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:a(()=>[o(D,{modelValue:n(t).country,"onUpdate:modelValue":l[3]||(l[3]=e=>n(t).country=e),options:n($),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),Ze,s("form",eo,[o(c,{label:"Curso"},{default:a(()=>[o(D,{modelValue:n(t).course,"onUpdate:modelValue":l[4]||(l[4]=e=>n(t).course=e),options:N.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),o(c,{label:"Precio personalizado"},{default:a(()=>[o(p,{modelValue:n(t).course_price,"onUpdate:modelValue":l[5]||(l[5]=e=>n(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1})])]),s("div",oo,[lo,s("form",to,[o(c,{label:"Nombre de usuario"},{default:a(()=>[o(p,{modelValue:n(t).username,"onUpdate:modelValue":l[6]||(l[6]=e=>n(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:a(()=>[o(p,{modelValue:n(t).email,"onUpdate:modelValue":l[7]||(l[7]=e=>n(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:a(()=>[o(p,{modelValue:n(t).password,"onUpdate:modelValue":l[8]||(l[8]=e=>n(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:a(()=>[o(p,{modelValue:n(t).password_confirm,"onUpdate:modelValue":l[9]||(l[9]=e=>n(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})])])])]),s("footer",ao,[o(A,{"icon-right":"save",onClick:J},{default:a(()=>[no]),_:1})])])]),_:1},8,["active"]),o(R,{active:v.value,"onUpdate:active":l[21]||(l[21]=e=>v.value=e),scroll:"clip"},{default:a(()=>[s("div",so,[io,s("section",ro,[s("div",uo,[s("div",co,[mo,s("form",po,[o(c,{label:"Nombre"},{default:a(()=>[o(p,{modelValue:n(t).firstname,"onUpdate:modelValue":l[11]||(l[11]=e=>n(t).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Apellido"},{default:a(()=>[o(p,{modelValue:n(t).lastname,"onUpdate:modelValue":l[12]||(l[12]=e=>n(t).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),o(c,{label:"Pa\xEDs"},{default:a(()=>[o(D,{modelValue:n(t).country,"onUpdate:modelValue":l[13]||(l[13]=e=>n(t).country=e),options:n($),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})]),_o,s("form",fo,[o(c,{label:"Curso"},{default:a(()=>[o(D,{modelValue:n(t).course,"onUpdate:modelValue":l[14]||(l[14]=e=>n(t).course=e),options:N.value,placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),o(c,{label:"Precio personalizado"},{default:a(()=>[o(p,{modelValue:n(t).course_price,"onUpdate:modelValue":l[15]||(l[15]=e=>n(t).course_price=e),maxlength:"30",placeholder:"Vac\xEDo: precio por defecto"},null,8,["modelValue"])]),_:1}),o(c,{label:"Curso pagado"},{default:a(()=>[o(te,{modelValue:n(t).payed,"onUpdate:modelValue":l[16]||(l[16]=e=>n(t).payed=e)},null,8,["modelValue"])]),_:1})])]),s("div",vo,[ho,s("form",wo,[o(c,{label:"Nombre de usuario"},{default:a(()=>[o(p,{modelValue:n(t).username,"onUpdate:modelValue":l[17]||(l[17]=e=>n(t).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),o(c,{label:"Correo"},{default:a(()=>[o(p,{modelValue:n(t).email,"onUpdate:modelValue":l[18]||(l[18]=e=>n(t).email=e),maxlength:"40"},null,8,["modelValue"])]),_:1}),o(c,{label:"Contrase\xF1a"},{default:a(()=>[o(p,{modelValue:n(t).password,"onUpdate:modelValue":l[19]||(l[19]=e=>n(t).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),o(c,{label:"Confirmar contrase\xF1a"},{default:a(()=>[o(p,{modelValue:n(t).password_confirm,"onUpdate:modelValue":l[20]||(l[20]=e=>n(t).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})])])])]),s("footer",go,[o(A,{"icon-right":"save",onClick:q},{default:a(()=>[Vo]),_:1})])])]),_:1},8,["active"])])}}});typeof G=="function"&&G(bo);export{bo as default};
