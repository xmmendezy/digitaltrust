import{d as q,k as b,R as w,K as X,S as G,U as ee,o as i,c as m,h as t,n as U,V as ae,u as a,i as V,a as l,w as c,T as j,F as T,x as B,t as f,W as te,X as le,Y as re,j as z,Z as se,_ as de,J,r as $,l as D,$ as K}from"./vendor.0c19fb08.js";import{_ as ne,u as oe,S as ie,a as ce}from"./index.a4331912.js";var ue="/td_app/images/chip.png";const Z=n=>(le("data-v-10cb1eab"),n=n(),re(),n),me={class:"card-item__side -front"},ve=["aria-label"],_e=["src"],pe={class:"card-item__wrapper"},fe={class:"card-item__top"},he=Z(()=>t("img",{src:ue,class:"card-item__chip",alt:"Card chip image"},null,-1)),be={class:"card-item__type"},ge=["src","alt"],ye=["for"],ke={key:0,class:"card-item__numberItem"},Ce={class:"card-item__content"},Ve=["for"],xe={class:"card-item__holder"},Fe={class:"card-item__name",key:"1"},$e={class:"card-item__name",key:"2"},Ne=["for"],Ie=["for"],Me={key:"2"},we=z(" / "),Pe=["for"],Ye={key:"2"},je={class:"card-item__side -back"},Te=["aria-label"],Be=["src"],Se=Z(()=>t("div",{class:"card-item__band"},null,-1)),Ee={class:"card-item__cvv"},Ue=["for"],De={class:"card-item__cvvTitle"},Ae={class:"card-item__cvvBand"},Re={class:"card-item__type"},He=["src"],Le=q({props:{valueFields:{type:Object,required:!0},inputFields:{type:Object,default:()=>({cardNumber:"v-card-number",cardName:"v-card-name",cardMonth:"v-card-month",cardYear:"v-card-year",cardCvv:"v-card-cvv"})},labels:{type:Object,default:()=>({cardName:"Full Name",cardHolder:"Card Holder",cardMonth:"MM",cardYear:"YY",cardExpires:"Expires",cardCvv:"CVV"})},isCardNumberMasked:{type:Boolean,default:!0},hasRandomBackgrounds:{type:Boolean,default:!0},backgroundImage:{type:[String,Number],default:""},setType:{type:String,default:""}},emits:["get-type"],setup(n,{emit:x}){const s=n,P="#### #### #### ####",k=b(null),g=b(null),u=b(!1),C=b(!1),v=b("#### ###### #####"),S=b("#### #### #### ###"),A=b("#### ###### ####"),Y=b("###### ####### ######"),R=b(P),M=b(P),N=b({}),H=w(()=>{const r=s.valueFields.cardNumber.replace(/\s+/g,"");return r.startsWith("2131")||r.startsWith("1800")?S:P}),_=w(()=>`/td_app/images/${p.value}.png`),o=["visaelectron","visa","elo","amex","mastercard","discover","unionpay","troy","dinersclub","jcb","laser","dankort","uatp","mir","hipercard","aura","maestro"],p=w(()=>{var d,y;const r=(y=(d=s.setType)==null?void 0:d.toLowerCase())==null?void 0:y.replace(/ /g,"");if((r==null?void 0:r.length)&&Object.values(o).includes(r))return r;const e=s.valueFields.cardNumber.replace(/\s+/g,"");return e.match(/^4(026|17500|405|508|844|91[37])/)?"visaelectron":e.match(/^4\d{12}(\d{3})?$/)?"visa":e.match(/^((509091)|(636368)|(636297)|(504175)|(438935)|(40117[8-9])|(45763[1-2])|(457393)|(431274)|(50990[0-2])|(5099[7-9][0-9])|(50996[4-9])|(509[1-8][0-9][0-9])|(5090(0[0-2]|0[4-9]|1[2-9]|[24589][0-9]|3[1-9]|6[0-46-9]|7[0-24-9]))|(5067(0[0-24-8]|1[0-24-9]|2[014-9]|3[0-379]|4[0-9]|5[0-3]|6[0-5]|7[0-8]))|(6504(0[5-9]|1[0-9]|2[0-9]|3[0-9]))|(6504(8[5-9]|9[0-9])|6505(0[0-9]|1[0-9]|2[0-9]|3[0-8]))|(6505(4[1-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-8]))|(6507(0[0-9]|1[0-8]))|(65072[0-7])|(6509(0[1-9]|1[0-9]|20))|(6516(5[2-9]|6[0-9]|7[0-9]))|(6550(0[0-9]|1[0-9]))|(6550(2[1-9]|3[0-9]|4[0-9]|5[0-8])))/)?"elo":e.match(/^3[47]\d{13}$/)?"amex":e.match(/^(5[1-5]\d{4}|677189)\d{10}$/)?"mastercard":e.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/)?"discover":e.match(/^62[0-9]\d{14,17}$/)?"unionpay":e.match(/^9792\d{12}$/)?"troy":e.match(/^3(0[0-5]|[68]\d)\d{11,16}/)?"dinersclub":e.match(/(?:2131|1800|35[0-9]{3})[0-9]{11}$/)?"jcb":e.match(/^(6304|6706|6709|6771)[0-9]{12,15}$/)?"laser":e.match(/^5019\d{12}$/)?"dankort":e.match(/^1\d{14}$/)?"uatp":e.match(/^220[0-4]\d{12}$/)?"mir":e.match(/^(606282\d{10}(\d{3})?)|(3841\d{15})$/)?"hipercard":e.match(/^((?!504175))^((?!5067))(^50[0-9])/)?"aura":e.match(/(?:5[0678]\d\d|6304|6390|67\d\d)\d{8,15}$/)?"maestro":""}),h=w(()=>!s.hasRandomBackgrounds&&parseInt(s.backgroundImage)?"Image cover":""),L=w(()=>{const r=parseInt(s.backgroundImage);return Number.isFinite(r)&&r<26&&r>0}),F=w(()=>{const r=parseInt(s.backgroundImage);return L.value?`/td_app/images/${r}.jpg`:s.backgroundImage&&!Number.isFinite(r)?s.backgroundImage:s.hasRandomBackgrounds?`/td_app/images/${Math.floor(Math.random()*25+1)}.jpg`:null}),E=(r="addEventListener")=>{document.querySelectorAll("[data-card-field]").forEach(d=>{d[r]("focus",()=>{u.value=!0,d.id===s.inputFields.cardYear||d.id===s.inputFields.cardMonth?g.value="cardDate":g.value=d.id,C.value=d.id===s.inputFields.cardCvv}),d[r]("blur",()=>{C.value=!d.id===s.inputFields.cardCvv;const y=setTimeout(()=>{u.value||(g.value=null),clearTimeout(y)},300);u.value=!1})})},I=()=>{const r=N.value[g.value||""];k.value=r?{width:`${r.offsetWidth}px`,height:`${r.offsetHeight}px`,transform:`translateX(${r.offsetLeft}px) translateY(${r.offsetTop}px)`}:null},O=(r,e)=>{const d=p.value==="amex"?13:14;return r<d&&s.valueFields.cardNumber.length>r&&e.trim()!==""&&s.isCardNumberMasked},W=()=>{const r={amex:v,dinersclub:A,jcb:H,uatp:S,unionpay:Y};M.value=(r[p.value]||R).value,se(()=>{I()})};return X(g,()=>{g.value?I():k.value=null}),X(p,r=>{x("get-type",r),W()}),G(E),ee(()=>E("removeEventListener")),(r,e)=>n.labels&&n.inputFields?(i(),m("div",{key:0,class:U(["card-item",{"-active":C.value}])},[t("div",me,[t("div",{class:U([{"-active":k.value},"card-item__focus"]),style:ae(k.value),ref:d=>{d&&(N.value.focusElement=d)}},null,6),t("div",{class:"card-item__cover","aria-label":a(h)},[typeof a(F)=="string"?(i(),m("img",{key:0,src:a(F),class:"card-item__bg",alt:"Background image"},null,8,_e)):V("",!0)],8,ve),t("div",pe,[t("div",fe,[he,t("div",be,[l(j,{name:"slide-fade-up"},{default:c(()=>[a(p)?(i(),m("img",{src:a(_),key:a(p),alt:`${a(p)} brand image`,class:"card-item__typeImg"},null,8,ge)):V("",!0)]),_:1})])]),t("label",{for:n.inputFields.cardNumber,ref:d=>{d&&(N.value[n.inputFields.cardNumber]=d)},"aria-label":"Card number",class:"card-item__number"},[(i(!0),m(T,null,B(M.value.split(""),(d,y)=>(i(),m("span",{key:y},[l(j,{name:"slide-fade-up"},{default:c(()=>[O(y,d)?(i(),m("div",ke,"*")):n.valueFields.cardNumber.length>y?(i(),m("div",{class:U([{"-active":d.trim()===""},"card-item__numberItem"]),key:M.value},f(n.valueFields.cardNumber[y]),3)):(i(),m("div",{class:U([{"-active":d.trim()===""},"card-item__numberItem"]),key:M.value+1},f(d),3))]),_:2},1024)]))),128))],8,ye),t("div",Ce,[t("label",{for:n.inputFields.cardName,ref:d=>{d&&(N.value[n.inputFields.cardName]=d)},"aria-label":"Card name",class:"card-item__info"},[t("div",xe,f(n.labels.cardHolder||"Card Holder"),1),l(j,{name:"slide-fade-up"},{default:c(()=>[n.valueFields.cardName.length?(i(),m("div",Fe,[l(te,{name:"slide-fade-right"},{default:c(()=>[(i(!0),m(T,null,B(n.valueFields.cardName.replace(/\s\s+/g," "),(d,y)=>(i(),m("span",{key:y+1,class:"card-item__nameItem"},f(d),1))),128))]),_:1})])):(i(),m("div",$e,f(n.labels.cardName||"Full Name"),1))]),_:1})],8,Ve),t("div",{class:"card-item__date",ref:d=>{d&&(N.value.cardDate=d)}},[t("label",{for:n.inputFields.cardMonth,class:"card-item__dateTitle","aria-label":"Expiration date"},f(n.labels.cardExpires||"Expires"),9,Ne),t("label",{for:n.inputFields.cardMonth,class:"card-item__dateItem","aria-label":"Card month"},[l(j,{name:"slide-fade-up"},{default:c(()=>[n.valueFields.cardMonth?(i(),m("span",{key:n.valueFields.cardMonth},f(n.valueFields.cardMonth),1)):(i(),m("span",Me,f(n.labels.cardMonth||"MM"),1))]),_:1})],8,Ie),we,t("label",{for:n.inputFields.cardYear,class:"card-item__dateItem","aria-label":"Card year"},[l(j,{name:"slide-fade-up"},{default:c(()=>[n.valueFields.cardYear?(i(),m("span",{key:n.valueFields.cardYear},f(String(n.valueFields.cardYear).slice(2,4)),1)):(i(),m("span",Ye,f(n.labels.cardYear||"YY"),1))]),_:1})],8,Pe)],512)])])]),t("div",je,[t("div",{class:"card-item__cover","aria-label":a(h)},[typeof a(F)=="string"?(i(),m("img",{key:0,src:a(F),class:"card-item__bg",alt:"Background image"},null,8,Be)):V("",!0)],8,Te),Se,t("div",Ee,[t("label",{for:n.inputFields.cardCvv,"aria-label":"Card CVV"},[t("div",De,f(n.labels.cardCvv),1),t("div",Ae,[t("span",null,f(n.valueFields.cardCvv),1)])],8,Ue),t("div",Re,[a(p)?(i(),m("img",{key:0,src:a(_),class:"card-item__typeImg",alt:"Dark bar image"},null,8,He)):V("",!0)])])])],2)):V("",!0)}});var Oe=ne(Le,[["__scopeId","data-v-10cb1eab"]]),Q={};const We={class:"signup has-text-centered"},ze={class:"card card-main"},qe={class:"card-content"},Xe={class:"is-flex is-justify-content-center"},Ge={class:"logo"},Je=t("img",{class:"is-justify-content-center",alt:"TradingDigital",src:ce},null,-1),Ke={class:"is-size-4 has-text-weight-bold is-justify-content-center"},Ze={class:"form mt-3"},Qe={class:"form mt-3"},ea={class:"form mt-3"},aa={class:"card-content media"},ta={class:"media-content"},la={class:"content"},ra=t("br",null,null,-1),sa={class:"media-right"},da={class:"buttons is-justify-content-center mt-6"},na=z(" Pagar el curso "),oa={key:1},ia={class:"form mt-3"},ca={class:"buttons",style:{gap:"1.5rem"}},ua=["value"],ma=["value"],va=z(" Pagar "),_a=q({emits:["loading"],setup(n,{emit:x}){const s=oe(),P=de(),k=b(1),g=b(!1);G(()=>{s.authenticated&&!s.payed&&(g.value=!0)});const u=J(new ie),C=b(s.course||""),v=J({cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:""}),S={cardName:"Nombre Completo",cardHolder:"Propietario",cardMonth:"MM",cardYear:"YY",cardExpires:"Expira",cardCvv:"CVV"},A=s.countries.map(_=>({value:_.id,label:_.name})),Y=b([]);s.courses().then(_=>{Y.value=_});const R=_=>"$"+_.price+"/90 d\xEDas",M=_=>{v.cardNumber=_.target.value.replace(/ /g,""),v.cardNumber=(v.cardNumber.match(/.{1,4}/g)||[""]).join(" ")},N=()=>{x("loading");const _=Y.value.find(o=>o.id===C.value);_&&s.post_4geeks({amount:_.price*.75,description:"TradingDigital - "+_.name,entity_description:"TradingDigital - "+_.name,currency:"usd",credit_card_number:parseInt(v.cardNumber.split(" ").join("")),credit_card_security_code_number:parseInt(v.cardCvv),exp_month:parseInt(v.cardMonth),exp_year:parseInt(v.cardYear)}).then(async()=>{await s.status().then(async o=>{s.payed=o.payed,P.push("/")})}).finally(()=>{x("loading")})},H=()=>{x("loading"),s.authenticated&&!s.payed?(x("loading"),g.value=!0):s.signup(u).then(_=>{x("loading"),_||s.subscribeCourse(C.value).then(o=>{o||(g.value=!0)})}).catch(()=>{x("loading")})};return(_,o)=>{const p=$("o-input"),h=$("o-field"),L=$("Multiselect"),F=$("o-step-item"),E=$("o-switch"),I=$("o-button"),O=$("o-steps"),W=Oe,r=$("o-select");return i(),m("div",We,[t("div",ze,[t("div",qe,[t("div",Xe,[t("div",Ge,[Je,t("p",Ke,f(a(s).authenticated&&!a(s).payed?"Pagar curso":"Bienvenido a TradingDigital"),1)])]),g.value?V("",!0):(i(),D(O,{key:0,modelValue:k.value,"onUpdate:modelValue":o[7]||(o[7]=e=>k.value=e),class:"mt-5","icon-prev":"chevron-left","icon-next":"chevron-right","label-position":"bottom"},{navigation:c(({previous:e,next:d})=>[t("div",da,[e.disabled?V("",!0):(i(),D(I,{key:0,variant:"primary","icon-pack":"fas","icon-left":"chevron-left",onClick:K(e.action,["prevent"])},null,8,["onClick"])),k.value===1&&a(u).firstname&&a(u).lastname&&a(u).country||k.value===2&&a(u).username&&a(u).email&&a(u).password&&a(u).password_confirm?(i(),D(I,{key:1,variant:"primary","icon-pack":"fas","icon-left":"chevron-right",onClick:K(d.action,["prevent"])},null,8,["onClick"])):V("",!0),k.value===3&&C.value?(i(),D(I,{key:2,variant:"primary","icon-pack":"fas","icon-left":"chevron-right",onClick:H},{default:c(()=>[na]),_:1})):V("",!0)])]),default:c(()=>[l(F,{step:"1",label:"Datos del Perfil",visible:!a(s).authenticated},{default:c(()=>[t("form",Ze,[l(h,{label:"Nombre"},{default:c(()=>[l(p,{modelValue:a(u).firstname,"onUpdate:modelValue":o[0]||(o[0]=e=>a(u).firstname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),l(h,{label:"Apellido"},{default:c(()=>[l(p,{modelValue:a(u).lastname,"onUpdate:modelValue":o[1]||(o[1]=e=>a(u).lastname=e),maxlength:"30"},null,8,["modelValue"])]),_:1}),l(h,{label:"Pa\xEDs"},{default:c(()=>[l(L,{modelValue:a(u).country,"onUpdate:modelValue":o[2]||(o[2]=e=>a(u).country=e),options:a(A),placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1})])]),_:1},8,["visible"]),l(F,{step:"2",label:"Datos del Usuario",visible:!a(s).authenticated},{default:c(()=>[t("form",Qe,[l(h,{label:"Nombre de usuario"},{default:c(()=>[l(p,{modelValue:a(u).username,"onUpdate:modelValue":o[3]||(o[3]=e=>a(u).username=e),maxlength:"10"},null,8,["modelValue"])]),_:1}),l(h,{label:"Correo"},{default:c(()=>[l(p,{modelValue:a(u).email,"onUpdate:modelValue":o[4]||(o[4]=e=>a(u).email=e),type:"email",maxlength:"40"},null,8,["modelValue"])]),_:1}),l(h,{label:"Contrase\xF1a"},{default:c(()=>[l(p,{modelValue:a(u).password,"onUpdate:modelValue":o[5]||(o[5]=e=>a(u).password=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1}),l(h,{label:"Confirmar contrase\xF1a"},{default:c(()=>[l(p,{modelValue:a(u).password_confirm,"onUpdate:modelValue":o[6]||(o[6]=e=>a(u).password_confirm=e),type:"password",maxlength:"20","password-reveal":""},null,8,["modelValue"])]),_:1})])]),_:1},8,["visible"]),l(F,{step:"3",label:"Curso",visible:!a(s).authenticated},{default:c(()=>[t("form",ea,[(i(!0),m(T,null,B(Y.value,e=>(i(),m("article",{class:"card",key:e.id},[t("div",aa,[t("div",ta,[t("div",la,[t("p",null,[t("strong",null,f(e.name),1),ra,t("small",null,f(R(e)),1)])])]),t("div",sa,[l(h,null,{default:c(()=>[l(E,{modelValue:C.value===e.id,disabled:C.value===e.id,variant:"primary",onInput:d=>C.value=e.id},null,8,["modelValue","disabled","onInput"])]),_:2},1024)])])]))),128))])]),_:1},8,["visible"])]),_:1},8,["modelValue"])),g.value?(i(),m("div",oa,[l(W,{"value-fields":a(v),labels:S},null,8,["value-fields"]),t("form",ia,[l(h,{label:"N\xFAmero de tarjeta"},{default:c(()=>[l(p,{modelValue:a(v).cardNumber,id:"v-card-number","data-card-field":"",maxlength:"19",type:"tel",onInput:M},null,8,["modelValue"])]),_:1}),l(h,{label:"Propietario"},{default:c(()=>[l(p,{modelValue:a(v).cardName,"onUpdate:modelValue":o[8]||(o[8]=e=>a(v).cardName=e),id:"v-card-name","data-card-field":"",type:"text"},null,8,["modelValue"])]),_:1}),t("div",ca,[l(h,{"root-class":"no",label:"Fecha de expiraci\xF3n",grouped:""},{default:c(()=>[l(r,{modelValue:a(v).cardMonth,"onUpdate:modelValue":o[9]||(o[9]=e=>a(v).cardMonth=e),id:"v-card-month","data-card-field":""},{default:c(()=>[(i(),m(T,null,B(12,e=>t("option",{key:"m"+e,value:e},f(e),9,ua)),64))]),_:1},8,["modelValue"]),l(r,{modelValue:a(v).cardYear,"onUpdate:modelValue":o[10]||(o[10]=e=>a(v).cardYear=e),id:"v-card-year","data-card-field":""},{default:c(()=>[(i(),m(T,null,B(12,e=>t("option",{key:"y"+e,value:2020+e},f(2020+e),9,ma)),64))]),_:1},8,["modelValue"])]),_:1}),l(h,{label:"CVV"},{default:c(()=>[l(p,{modelValue:a(v).cardCvv,"onUpdate:modelValue":o[11]||(o[11]=e=>a(v).cardCvv=e),id:"v-card-cvv","data-card-field":"",type:"text"},null,8,["modelValue"])]),_:1})]),l(I,{variant:"primary",onClick:N},{default:c(()=>[va]),_:1})])])):V("",!0)])])])}}});typeof Q=="function"&&Q(_a);export{_a as default};
