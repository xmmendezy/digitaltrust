import{o as r,c as _,h as e,d as L,k as p,K as Q,r as u,a as n,F as R,x as q,t as B,q as z,s as G,w as i,b as v,i as E,j as h}from"./vendor.0d4507b3.js";import{u as K,B as O}from"./index.65821b12.js";const Y={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},I=e("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1),J=[I];function P(M,a){return r(),_("svg",Y,J)}var W={name:"fa-solid-plus",render:P},V={};const X={class:"admin-blog"},Z={class:"columns-content"},ee={class:"column-content"},oe={class:"card-content media"},te={class:"media-content"},se={class:"content"},le={class:"level is-mobile"},ne=e("div",{class:"level-left"},[e("strong",null,"Nuevo art\xEDculo")],-1),ae={class:"level-right"},ie=["onClick"],ce={class:"card-content media"},de={class:"media-content"},re={class:"content"},_e={class:"has-text-left"},ue={class:"level is-mobile"},ve={class:"level-left"},he={class:"column-content main"},me={class:"blog-main"},pe={class:"level is-mobile"},fe={class:"level-left"},ge={class:"level-right"},xe={class:"level is-mobile"},be={class:"level-item"},Ce=h("Guardar"),ke={key:0,class:"level-item"},ye=h("Duplicar"),De={key:1,class:"level-item"},Be=h("Eliminar"),Ee={class:"level-item"},Ve=h("Cancelar"),Me={class:"modal-card alert"},we=e("header",{class:"modal-card-head"},[e("p",{class:"modal-card-title"},"Eliminar art\xEDculo")],-1),Te=e("section",{class:"modal-card-body"},[e("p",null,"Esta acci\xF3n no se puede revertir.")],-1),Ne={class:"modal-card-foot"},Fe=h("Eliminar"),Se=h("Cancelar"),$e=L({emits:["loading"],setup(M,{emit:a}){const c=K(),m=p(!1),b=p([]);c.courses().then(s=>{b.value=s.filter(t=>t.blog).map(t=>({value:t.id,label:t.name}))});const k=p(null),y=p(null),o=Q(new O(k,y)),f=p([]);a("loading"),c.blogs().then(s=>{f.value=s,a("loading")});const w=s=>z(G(s),"dd/MM/yyyy"),T=s=>{a("loading"),o.id=s.id,o.title=s.title,o.courses=s.courses;const t=()=>{o.editor_description&&o.editor_content&&s!==void 0?(o.setDescriptionHTML(s.description),o.setContentHTML(s.content),a("loading")):setTimeout(t,100)};t()},C=()=>{a("loading"),o.clean(),a("loading")},N=()=>{a("loading"),o.id="",o.title=o.title+" - Duplicado",a("loading")},F=()=>{m.value=!0},S=()=>{a("loading"),c.delete_blog(o.id).then(s=>{s||(c.notification("Se ha eliminado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t,C()}))}).finally(()=>{m.value=!1,a("loading")})},$=()=>{o.all_courses=b.value.map(s=>s.value),a("loading"),c.blog(o).then(s=>{s||(c.notification("Se ha guardado el art\xEDculo","link"),c.blogs().then(t=>{f.value=t}))}).finally(()=>{a("loading")})};return(s,t)=>{const A=W,H=u("o-input"),g=u("o-field"),d=u("o-button"),U=u("Multiselect"),D=u("QuillEditor"),j=u("o-modal");return r(),_("div",X,[e("div",Z,[e("div",ee,[e("article",{class:"card",onClick:C},[e("div",oe,[e("div",te,[e("div",se,[e("nav",le,[ne,e("div",ae,[n(A)])])])])])]),(r(!0),_(R,null,q(f.value,l=>(r(),_("article",{class:"card",key:l.id,onClick:x=>T(l)},[e("div",ce,[e("div",de,[e("div",re,[e("p",_e,[e("strong",null,B(l.title),1)]),e("nav",ue,[e("div",ve,B(w(l.created)),1)])])])])],8,ie))),128))]),e("div",he,[e("article",me,[e("nav",pe,[e("div",fe,[n(g,{label:"T\xEDtulo"},{default:i(()=>[n(H,{modelValue:v(o).title,"onUpdate:modelValue":t[0]||(t[0]=l=>v(o).title=l),maxlength:"70"},null,8,["modelValue"])]),_:1})]),e("div",ge,[e("nav",xe,[e("div",be,[n(d,{variant:"primary",onClick:$},{default:i(()=>[Ce]),_:1})]),v(o).id?(r(),_("div",ke,[n(d,{onClick:N},{default:i(()=>[ye]),_:1})])):E("",!0),v(o).id?(r(),_("div",De,[n(d,{variant:"danger",onClick:F},{default:i(()=>[Be]),_:1})])):E("",!0),e("div",Ee,[n(d,{onClick:C},{default:i(()=>[Ve]),_:1})])])])]),n(g,{label:"Curso"},{default:i(()=>[n(U,{modelValue:v(o).courses,"onUpdate:modelValue":t[1]||(t[1]=l=>v(o).courses=l),options:b.value,mode:"tags",placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),n(g,{label:"Descripci\xF3n",class:"editor description"},{default:i(()=>[n(D,{ref:(l,x)=>{x.editor_description=l,k.value=l},theme:"snow",toolbar:"full"},null,512)]),_:1}),n(g,{label:"Contenido",class:"editor content"},{default:i(()=>[n(D,{ref:(l,x)=>{x.editor_content=l,y.value=l},theme:"snow",toolbar:"full"},null,512)]),_:1})])])]),n(j,{active:m.value,"onUpdate:active":t[3]||(t[3]=l=>m.value=l),scroll:"clip"},{default:i(()=>[e("div",Me,[we,Te,e("footer",Ne,[n(d,{variant:"primary",onClick:S},{default:i(()=>[Fe]),_:1}),n(d,{onClick:t[2]||(t[2]=l=>m.value=!1)},{default:i(()=>[Se]),_:1})])])]),_:1},8,["active"])])}}});typeof V=="function"&&V($e);export{$e as default};
