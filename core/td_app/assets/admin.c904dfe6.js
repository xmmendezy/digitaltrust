import{_ as M,u as N,N as H,a as I}from"./index.fd7e8ecc.js";import{d as y,r,o as f,c as C,h as e,a as t,w as l,u as d,j as m,k as p,K as O,N as Q,F as R,R as G,T as K,l as V,p as P,t as D,i as q}from"./vendor.92770e02.js";const z={class:"tabs"},J={class:"is-justify-content-flex-end"},W=m("Inicio"),X={class:"is-hidden-mobile"},Y=m("Comunicados"),Z={class:"is-hidden-mobile"},ee=m("Blog"),oe=y({setup($){const s=N();return(u,i)=>{const _=r("router-link");return f(),C("div",z,[e("ul",J,[e("li",null,[t(_,{to:"/admin"},{default:l(()=>[W]),_:1})]),e("li",X,[t(_,{to:"/admin/notice"},{default:l(()=>[Y]),_:1})]),e("li",Z,[t(_,{to:"/admin/blog"},{default:l(()=>[ee]),_:1})]),e("li",null,[e("a",{onClick:i[0]||(i[0]=h=>d(s).logout())},"Salir")])])])}}});var te=M(oe,[["__scopeId","data-v-19097a86"]]);const ae={class:"admin"},se={class:"card card-main"},le={class:"card-header"},ne=e("figure",{class:"image is-64x64 logo"},[e("img",{alt:"TradingDigital",src:I})],-1),ie=e("p",{class:"card-header-title"},"TradingDigital - Admin",-1),de={class:"card-content"},ce={style:{position:"relative"}},re=e("i",{class:"fas fa-plus"},null,-1),ue=[re],_e={class:"modal-card"},me={class:"modal-card-head"},pe={class:"modal-card-title"},ve={class:"modal-card-body"},fe={class:"modal-card-foot"},he=m("Duplicar"),ge=m("Cancelar"),ke=y({setup($){const s=N(),u=p(!1),i=p(!1),_=p(0);G("reload_notice",_);const h=p(null),o=O(new H(h)),T=()=>{u.value=!u.value},g=p([]);s.courses().then(c=>{g.value=c.map(a=>({value:a.id,label:a.name}))});const w=()=>{i.value=!0},A=()=>{o.id="",o.title=o.title+" - Duplicado"};Q(i,()=>{i.value||(o.clean(),s.notice_edit=void 0)}),s.$subscribe(()=>{if(s.notice_edit!==void 0){i.value=!0,o.id=s.notice_edit.id,o.title=s.notice_edit.title,o.courses=s.notice_edit.courses;const c=()=>{o.editor&&s.notice_edit!==void 0?o.setHTML(s.notice_edit.description):setTimeout(c,100)};c()}});const E=()=>{o.all_courses=g.value.map(c=>c.value),u.value=!0,s.notice(o).then(c=>{c||(i.value=!1,s.notification("Se ha guardado el comunicado","link"),_.value=Math.random())}).finally(()=>{u.value=!1})};return(c,a)=>{const x=te,S=r("router-view"),B=r("o-loading"),k=r("o-input"),v=r("o-field"),F=r("Multiselect"),U=r("QuillEditor"),b=r("o-button"),j=r("o-modal");return f(),C(R,null,[e("div",ae,[e("div",se,[e("header",le,[ne,ie,t(x,{class:"is-hidden-mobile"})]),e("div",de,[t(x,{class:"is-hidden-tablet"}),e("div",ce,[t(S,null,{default:l(({Component:n,route:L})=>[t(K,{name:L.meta.transitionName},{default:l(()=>[(f(),V(P(n),{onLoading:T}))]),_:2},1032,["name"])]),_:1}),t(B,{active:u.value,"onUpdate:active":a[0]||(a[0]=n=>u.value=n)},null,8,["active"])])])])]),e("a",{class:"button is-floating is-hidden-mobile",onClick:w},ue),t(j,{active:i.value,"onUpdate:active":a[5]||(a[5]=n=>i.value=n),scroll:"clip"},{default:l(()=>[e("div",_e,[e("header",me,[e("p",pe,D(d(o).id?"Editar comunicado":"Nuevo comunicado"),1)]),e("section",ve,[t(v,{label:"T\xEDtulo"},{default:l(()=>[t(k,{modelValue:d(o).title,"onUpdate:modelValue":a[1]||(a[1]=n=>d(o).title=n),maxlength:"70"},null,8,["modelValue"])]),_:1}),t(v,{label:"Curso"},{default:l(()=>[t(F,{modelValue:d(o).courses,"onUpdate:modelValue":a[2]||(a[2]=n=>d(o).courses=n),options:g.value,mode:"tags",placeholder:"Seleccionar...",noOptionsText:"No hay opciones a\xFAn",noResultsText:"No hay opciones a\xFAn",searchable:""},null,8,["modelValue","options"])]),_:1}),t(v,{label:"Enlace (Opcional)"},{default:l(()=>[t(k,{modelValue:d(o).url,"onUpdate:modelValue":a[3]||(a[3]=n=>d(o).url=n),maxlength:"70"},null,8,["modelValue"])]),_:1}),t(v,{label:"Descripci\xF3n",class:"editor"},{default:l(()=>[t(U,{ref_key:"editor",ref:h,theme:"snow",toolbar:"full"},null,512)]),_:1})]),e("footer",fe,[t(b,{variant:"primary",onClick:E},{default:l(()=>[m(D(d(o).id?"Guardar":"Publicar"),1)]),_:1}),d(o).id?(f(),V(b,{key:0,onClick:A},{default:l(()=>[he]),_:1})):q("",!0),t(b,{onClick:a[4]||(a[4]=n=>i.value=!1)},{default:l(()=>[ge]),_:1})])])]),_:1},8,["active"])],64)}}});export{ke as default};
